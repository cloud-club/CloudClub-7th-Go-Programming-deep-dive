# CloudClub Chat

Go + gRPC + Kafka + Next.jsλ΅ κµ¬ν„λ μ‹¤μ‹κ°„ μ±„ν… μ‹μ¤ν…μ…λ‹λ‹¤.

## π›οΈ μ‹μ¤ν… μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    WebSocket     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Next.js       β”‚β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ίβ”‚  Web Gateway    β”‚
β”‚   Client        β”‚                  β”‚  (Go Server)    β”‚
β”‚  (Port 3000)    β”‚                  β”‚  (Port 8080)    β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                             β”‚ gRPC
                                             β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    Kafka         β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Message        β”‚β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ίβ”‚   gRPC Server   β”‚
β”‚  Processor      β”‚                  β”‚   (Port 8082)   β”‚
β”‚  (Consumer)     β”‚                  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                           β”‚
         β–²                                    β”‚
         β”‚                                    β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚     Kafka       β”‚                  β”‚   Chat Rooms    β”‚
β”‚   Cluster       β”‚                  β”‚   & Messages    β”‚
β”‚ (Port 9092-94)  β”‚                  β”‚   (In-Memory)   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

![system_architecture](images/system_architecture.png)

## π‘¨ μ‚¬μ©μ ν”λ΅μ°

![user_flow](images/user_flow.png)

## π’¬ μ±„ν… ν”λ΅μ°

![chat_flow](images/chat_flow.png)

### μ±„ν… μ„λΉ„μ¤ μ§„μ… (μ‚¬μ©μ 1 - μ΄μ°½λ―Ό)

![](images/1.gif)

### μ±„ν…λ°© μ§„μ… λ° μ±„ν… μ…λ ¥ (μ‚¬μ©μ 2 - μ΄κ²½μ¤€)

![](images/2.gif)

### μ±„ν… μ…λ ¥ λ° μ±„ν…λ°© ν™•μΈ

![](images/3.gif)

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
go-grpc/
β”β”€β”€ server/          # Go λ°±μ—”λ“
β”‚   β”β”€β”€ cmd/server/  # λ©”μΈ μ• ν”λ¦¬μΌ€μ΄μ…
β”‚   β”β”€β”€ internal/    # λ‚΄λ¶€ λΉ„μ¦λ‹μ¤ λ΅μ§
β”‚   β”β”€β”€ api/proto/   # gRPC ν”„λ΅ν† μ½ μ •μ
β”‚   β””β”€β”€ pkg/gen/     # μƒμ„±λ protobuf μ½”λ“
β”β”€β”€ client/          # Next.js ν”„λ΅ νΈμ—”λ“
β”‚   β”β”€β”€ src/
β”‚   β”‚   β”β”€β”€ components/  # React μ»΄ν¬λ„νΈ
β”‚   β”‚   β”β”€β”€ hooks/       # μ»¤μ¤ν…€ ν›…
β”‚   β”‚   β””β”€β”€ types/       # TypeScript νƒ€μ…
β””β”€β”€ infra/           # Docker μΈν”„λΌ μ„¤μ •
    β””β”€β”€ docker-compose.yml
```

## π”§ κ°λ° κ°€μ΄λ“

### ν™κ²½ μ”κµ¬μ‚¬ν•­

- **Go**: 1.21 μ΄μƒ
- **Node.js**: 18 μ΄μƒ
- **Docker**: 20 μ΄μƒ
- **Make**: 3.8 μ΄μƒ
- **Protocol Buffers**: 3.21 μ΄μƒ

### μ£Όμ” κΈ°λ¥

- β… μ‹¤μ‹κ°„ μ±„ν… (WebSocket)
- β… λ‹¤μ¤‘ μ±„ν…λ°© μ§€μ›
- β… μ‚¬μ©μ μ…μ¥/ν‡΄μ¥ μ•λ¦Ό
- β… λ¶„μ‚° λ©”μ‹μ§€ μ²λ¦¬ (Kafka)
- β… λ°μ‘ν• UI (λ¨λ°”μΌ/λ°μ¤ν¬ν†±)
- β… μλ™ μ¬μ—°κ²°

## π¦ ν¬νΈ μ •λ³΄

| μ„λΉ„μ¤         | ν¬νΈ | μ„¤λ…                  |
| -------------- | ---- | --------------------- |
| Next.js Client | 3000 | React κ°λ° μ„λ²„       |
| Web Gateway    | 8080 | WebSocket + HTTP API  |
| gRPC Server    | 8082 | λ‚΄λ¶€ gRPC ν†µμ‹         |
| Kafka UI       | 8088 | Kafka κ΄€λ¦¬ μΈν„°νμ΄μ¤ |
| Kafka Broker 1 | 9092 | Kafka ν΄λ¬μ¤ν„°        |
| Kafka Broker 2 | 9093 | Kafka ν΄λ¬μ¤ν„°        |
| Kafka Broker 3 | 9094 | Kafka ν΄λ¬μ¤ν„°        |

## π“ μ ‘μ† λ°©λ²•

1. **μ›Ή μ±„ν…**: http://localhost:3000
2. **Kafka λ¨λ‹ν„°λ§**: http://localhost:8088
